<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘½è¿é€‰æ‹©æ¸¸æˆï¼šäº¤å°è‹—çš„æˆé•¿ä¹‹æ—…</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        .scene {
            padding: 30px;
            display: none;
        }
        .active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.2rem;
        }
        h2 {
            color: #3498db;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        p {
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        .dream-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        .dream-option {
            flex: 1;
            min-width: 150px;
            padding: 20px;
            border: 2px solid #3498db;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .dream-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: #e8f4fc;
        }
        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }
        button {
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: #3498db;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            font-weight: bold;
        }
        .stat {
            padding: 10px 15px;
            border-radius: 10px;
            background: #ecf0f1;
            min-width: 100px;
            text-align: center;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        #self-improvement { color: #e74c3c; }
        #optimism { color: #f39c12; }
        #gratitude { color: #27ae60; }
        .ending {
            font-size: 1.2rem;
            line-height: 1.8;
            padding: 20px;
            text-align: center;
        }
        .animation-container {
            width: 100%;
            height: 200px;
            margin: 20px 0;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .character {
            font-size: 4rem;
            position: absolute;
            transition: all 1s ease;
        }
        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        #progress-self { background: #e74c3c; width: 50%; }
        #progress-opt { background: #f39c12; width: 50%; }
        #progress-grat { background: #27ae60; width: 50%; }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes celebrate {
            0% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-30px) rotate(10deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(-30px) rotate(-10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 600px) {
            .dream-options {
                flex-direction: column;
            }
            .scene {
                padding: 20px;
            }
            h1 {
                font-size: 1.8rem;
            }
            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¼€åœº -->
        <div id="scene-start" class="scene active">
            <h1>å‘½è¿é€‰æ‹©æ¸¸æˆï¼šäº¤å°è‹—çš„æˆé•¿ä¹‹æ—…</h1>
            <p>åœ¨è¿™ä¸ªäº’åŠ¨æ¸¸æˆä¸­ï¼Œä½ å°†æ‰®æ¼”"äº¤å°è‹—"ï¼Œä½“éªŒåœ¨çŸ³æ¹–é•‡çš„æˆé•¿å†ç¨‹ã€‚ä½ çš„æ¯ä¸ªé€‰æ‹©éƒ½ä¼šå½±å“ä¸‰ç§æ ¸å¿ƒå“è´¨ï¼š<strong>è‡ªå¼º</strong>ã€<strong>ä¹è§‚</strong>å’Œ<strong>æ„Ÿæ©</strong>ã€‚</p>
            <p>è¿™äº›å“è´¨å°†å†³å®šä½ èƒ½å¦å®ç°æ¢¦æƒ³ï¼Œæˆä¸ºä½ æƒ³æˆä¸ºçš„äººï¼</p>
            <div class="animation-container">
                <div class="character" style="animation: bounce 2s infinite;">ğŸŒ±</div>
            </div>
            <button onclick="showScene('scene-dream')">å¼€å§‹æ¸¸æˆ</button>
        </div>

        <!-- é€‰æ‹©æ¢¦æƒ³ -->
        <div id="scene-dream" class="scene">
            <h2>ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ä½ çš„æ¢¦æƒ³</h2>
            <p>äº¤å°è‹—ï¼Œä½ é•¿å¤§åæƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿé€‰æ‹©ä¸€ä¸ªä½ æœ€å‘å¾€çš„èŒä¸šé“è·¯ï¼š</p>
            <div class="dream-options">
                <div class="dream-option" onclick="selectDream('scientist')">
                    <h3>ğŸ”¬ ç§‘å­¦å®¶</h3>
                    <p>æ¢ç´¢è‡ªç„¶å¥¥ç§˜ï¼Œç”¨ç§‘æŠ€æ”¹å˜ä¸–ç•Œ</p>
                </div>
                <div class="dream-option" onclick="selectDream('athlete')">
                    <h3>ğŸƒ è¿åŠ¨å‘˜</h3>
                    <p>æŒ‘æˆ˜èº«ä½“æé™ï¼Œä¸ºå®¶ä¹¡äº‰å…‰</p>
                </div>
                <div class="dream-option" onclick="selectDream('artist')">
                    <h3>ğŸ¨ è‰ºæœ¯å®¶</h3>
                    <p>ç”¨åˆ›æ„è¡¨è¾¾æƒ…æ„Ÿï¼Œä¼ æ‰¿çŸ³æ¹–æ–‡åŒ–</p>
                </div>
                <div class="dream-option" onclick="selectDream('leader')">
                    <h3>ğŸ›ï¸ é•‡é•¿</h3>
                    <p>æœåŠ¡å®¶ä¹¡äººæ°‘ï¼Œå»ºè®¾ç¾å¥½çŸ³æ¹–</p>
                </div>
                <div class="dream-option" onclick="selectDream('soldier')">
                    <h3>ğŸ–ï¸ å†›äºº</h3>
                    <p>ä¿å®¶å«å›½ï¼Œå®ˆæŠ¤äººæ°‘å®‰å…¨</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress-dream" style="width: 0%; background: #3498db;"></div>
            </div>
        </div>

        <!-- äº”ä¸ªäº‹ä»¶åœºæ™¯å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
        <div id="scene-events"></div>

        <!-- ç»“å±€ -->
        <div id="scene-ending" class="scene">
            <h2>äº¤å°è‹—çš„æˆé•¿ç»“å±€</h2>
            <div class="animation-container" id="ending-animation">
                <!-- åŠ¨ç”»å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="ending" id="ending-text">
                <!-- ç»“å±€æ–‡æœ¬å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="stats">
                <div class="stat">è‡ªå¼º: <span id="final-si">0</span></div>
                <div class="stat">ä¹è§‚: <span id="final-op">0</span></div>
                <div class="stat">æ„Ÿæ©: <span id="final-gr">0</span></div>
            </div>
            <button onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            dream: null,
            selfImprovement: 50,
            optimism: 50,
            gratitude: 50,
            currentEvent: 0,
            events: []
        };

        // äº‹ä»¶æ•°æ®åº“ - æ ¹æ®ä¸åŒæ¢¦æƒ³å®šåˆ¶
        const eventDatabase = {
            common: [
                {
                    title: "æ–°å­¦æœŸå¼€å§‹",
                    description: "æ–°å­¦æœŸå¼€å§‹äº†ï¼Œäº¤å°è‹—éœ€è¦é€‰æ‹©å¦‚ä½•åˆ†é…è‡ªå·±çš„è¯¾ä½™æ—¶é—´ã€‚",
                    options: [
                        { text: "å‚åŠ å­¦æ ¡çš„å…´è¶£å°ç»„ï¼Œå­¦ä¹ æ–°æŠ€èƒ½", effects: { selfImprovement: 10, optimism: 5, gratitude: 0 } },
                        { text: "å¸®åŠ©å®¶é‡Œå¹²å†œæ´»ï¼Œå‡è½»çˆ¶æ¯è´Ÿæ‹…", effects: { selfImprovement: 5, optimism: 0, gratitude: 15 } },
                        { text: "å’Œæœ‹å‹ä¸€èµ·ç©è€ï¼Œäº«å—ç«¥å¹´æ—¶å…‰", effects: { selfImprovement: 0, optimism: 15, gratitude: 5 } }
                    ]
                },
                {
                    title: "é‡è¦çš„è€ƒè¯•",
                    description: "æœŸä¸­è€ƒè¯•æˆç»©ä¸ç†æƒ³ï¼Œäº¤å°è‹—æ„Ÿåˆ°æœ‰äº›æ²®ä¸§ã€‚",
                    options: [
                        { text: "æ”¾å¼ƒåŠªåŠ›ï¼Œè®¤ä¸ºè‡ªå·±ä¸æ˜¯å­¦ä¹ çš„æ–™", effects: { selfImprovement: -15, optimism: -10, gratitude: 0 } },
                        { text: "è¯·æ•™è€å¸ˆå’ŒåŒå­¦ï¼Œæ‰¾å‡ºè‡ªå·±çš„ä¸è¶³", effects: { selfImprovement: 15, optimism: 5, gratitude: 5 } },
                        { text: "åˆ¶å®šå­¦ä¹ è®¡åˆ’ï¼Œæ¯å¤©åšæŒå¤ä¹ ", effects: { selfImprovement: 20, optimism: 0, gratitude: 0 } }
                    ]
                },
                {
                    title: "ç¤¾åŒºæ´»åŠ¨",
                    description: "æ‘é‡Œç»„ç»‡å¿—æ„¿æœåŠ¡æ´»åŠ¨ï¼Œå¸®åŠ© elderly å±…æ°‘æ”¶è·å†œäº§å“ã€‚",
                    options: [
                        { text: "å€Ÿå£å­¦ä¹ å¿™ï¼Œä¸å‚åŠ æ´»åŠ¨", effects: { selfImprovement: 0, optimism: -5, gratitude: -10 } },
                        { text: "å‚åŠ æ´»åŠ¨ï¼Œä½†åªåšåˆ†é…çš„ä»»åŠ¡", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "ä¸»åŠ¨ç»„ç»‡åŒå­¦ä¸€èµ·å‚åŠ ï¼Œå¸®åŠ©æ›´å¤šå±…æ°‘", effects: { selfImprovement: 10, optimism: 10, gratitude: 15 } }
                    ]
                }
            ],
            scientist: [
                {
                    title: "ç§‘å­¦ç«èµ›",
                    description: "å­¦æ ¡è¦é€‰æ‹”å­¦ç”Ÿå‚åŠ åŒºé‡Œçš„ç§‘å­¦ç«èµ›ï¼Œäº¤å°è‹—å¾ˆæ„Ÿå…´è¶£ã€‚",
                    options: [
                        { text: "è§‰å¾—è‡ªå·±èƒ½åŠ›ä¸å¤Ÿï¼Œä¸æŠ¥å", effects: { selfImprovement: -10, optimism: -10, gratitude: 0 } },
                        { text: "æŠ¥åå‚åŠ ï¼Œå°½åŠ›å‡†å¤‡", effects: { selfImprovement: 15, optimism: 5, gratitude: 0 } },
                        { text: "ç»„ç»‡å°é˜Ÿä¸€èµ·å‚èµ›ï¼Œäº’ç›¸å­¦ä¹ ", effects: { selfImprovement: 10, optimism: 10, gratitude: 10 } }
                    ]
                },
                {
                    title: "ç§‘æŠ€å±•è§ˆ",
                    description: "å¸‚é‡Œä¸¾åŠç§‘æŠ€å±•è§ˆï¼Œä½†éœ€è¦è‡ªå·±æ”¯ä»˜äº¤é€šå’Œé—¨ç¥¨è´¹ç”¨ã€‚",
                    options: [
                        { text: "ä¸å»å‚è§‚ï¼Œçœé’±ä¹°å­¦ä¹ èµ„æ–™", effects: { selfImprovement: 5, optimism: -5, gratitude: 0 } },
                        { text: "è¯·æ±‚çˆ¶æ¯æ”¯æŒå»å‚è§‚", effects: { selfImprovement: 10, optimism: 5, gratitude: -5 } },
                        { text: "é€šè¿‡æ”¶é›†åºŸå“è‡ªå·±æ”’é’±å»å‚è§‚", effects: { selfImprovement: 15, optimism: 10, gratitude: 5 } }
                    ]
                }
            ],
            athlete: [
                {
                    title: "ä½“è‚²é€‰æ‹”",
                    description: "çœä½“æ ¡æ•™ç»ƒæ¥å­¦æ ¡é€‰æ‹”ä½“è‚²è‹—å­ï¼Œçœ‹ä¸­äº†äº¤å°è‹—çš„æ½œåŠ›ã€‚",
                    options: [
                        { text: "æ‹…å¿ƒå½±å“å­¦ä¹ ï¼Œæ‹’ç»å‚åŠ é€‰æ‹”", effects: { selfImprovement: -5, optimism: -5, gratitude: 0 } },
                        { text: "å‚åŠ é€‰æ‹”ï¼Œä½†ä¸æ„¿å»å¤–åœ°è®­ç»ƒ", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "æŠ“ä½æœºä¼šï¼Œæ‰¿è¯ºä¼šå¹³è¡¡å¥½è®­ç»ƒå’Œå­¦ä¹ ", effects: { selfImprovement: 15, optimism: 10, gratitude: 5 } }
                    ]
                },
                {
                    title: "æ¯”èµ›å—ä¼¤",
                    description: "åœ¨é‡è¦æ¯”èµ›å‰ï¼Œäº¤å°è‹—è®­ç»ƒæ—¶å—ä¼¤ï¼ŒåŒ»ç”Ÿå»ºè®®ä¼‘æ¯ä¸€ä¸ªæœˆã€‚",
                    options: [
                        { text: "ç°å¿ƒä¸§æ°”ï¼Œæ”¾å¼ƒæ¯”èµ›", effects: { selfImprovement: -15, optimism: -15, gratitude: 0 } },
                        { text: "åšæŒè½»é‡è®­ç»ƒï¼Œå°½å¿«æ¢å¤", effects: { selfImprovement: 10, optimism: 10, gratitude: 0 } },
                        { text: "å¸®åŠ©é˜Ÿå‹è®­ç»ƒï¼Œå­¦ä¹ æˆ˜æœ¯çŸ¥è¯†", effects: { selfImprovement: 5, optimism: 15, gratitude: 10 } }
                    ]
                }
            ],
            artist: [
                {
                    title: "æ–‡åŒ–ä¼ æ‰¿",
                    description: "éé—ä¼ æ‰¿äººåˆ˜è€å¸ˆæ¥å­¦æ ¡æ‹›å‹Ÿå­¦å¾’ï¼Œå­¦ä¹ æ ¸æ¡ƒæ‹¼è´´æŠ€è‰ºã€‚",
                    options: [
                        { text: "è§‰å¾—ä¼ ç»ŸæŠ€è‰ºè¿‡æ—¶ï¼Œä¸æ„Ÿå…´è¶£", effects: { selfImprovement: -5, optimism: -5, gratitude: -10 } },
                        { text: "å°è¯•å­¦ä¹ ï¼Œä½†ä¸æŠ•å…¥å¤ªå¤šæ—¶é—´", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "è®¤çœŸå­¦ä¹ ï¼Œå¸Œæœ›ä¼ æ‰¿å®¶ä¹¡æ–‡åŒ–", effects: { selfImprovement: 10, optimism: 10, gratitude: 15 } }
                    ]
                },
                {
                    title: "åˆ›ä½œç“¶é¢ˆ",
                    description: "äº¤å°è‹—ä¸ºå‚åŠ è‰ºæœ¯æ¯”èµ›åˆ›ä½œä½œå“ï¼Œä½†é‡åˆ°äº†åˆ›æ„ç“¶é¢ˆã€‚",
                    options: [
                        { text: "æ”¾å¼ƒæ¯”èµ›ï¼Œè§‰å¾—è‡ªå·±æ²¡æœ‰å¤©èµ‹", effects: { selfImprovement: -15, optimism: -15, gratitude: 0 } },
                        { text: "æ¨¡ä»¿ä»–äººä½œå“äº¤å·®", effects: { selfImprovement: -5, optimism: -5, gratitude: -5 } },
                        { text: "ä»çŸ³æ¹–é•‡çš„è‡ªç„¶é£å…‰ä¸­å¯»æ‰¾çµæ„Ÿ", effects: { selfImprovement: 10, optimism: 15, gratitude: 10 } }
                    ]
                }
            ],
            leader: [
                {
                    title: "å­¦ç”Ÿä»£è¡¨",
                    description: "äº¤å°è‹—è¢«é€‰ä¸ºå­¦ç”Ÿä»£è¡¨ï¼Œå¯ä»¥å‘å­¦æ ¡æå‡ºæ”¹å–„å»ºè®®ã€‚",
                    options: [
                        { text: "ä¸å‘è¡¨æ„è§ï¼Œé¿å…éº»çƒ¦", effects: { selfImprovement: -5, optimism: -5, gratitude: -5 } },
                        { text: "æå‡ºæ”¹å–„è‡ªå·±ç­çº§çš„å»ºè®®", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "è°ƒç ”å…¨æ ¡å­¦ç”Ÿçš„éœ€æ±‚ï¼Œæå‡ºç»¼åˆæ–¹æ¡ˆ", effects: { selfImprovement: 15, optimism: 10, gratitude: 10 } }
                    ]
                },
                {
                    title: "ç¤¾åŒºé—®é¢˜",
                    description: "æ‘é‡Œåƒåœ¾å¤„ç†ä¸å½“çš„é—®é¢˜æ—¥ç›Šä¸¥é‡ï¼Œå½±å“å±…æ°‘ç”Ÿæ´»ã€‚",
                    options: [
                        { text: "ä¸å…³å¿ƒï¼Œè®¤ä¸ºè¿™æ˜¯å¤§äººçš„äº‹", effects: { selfImprovement: -5, optimism: -5, gratitude: -10 } },
                        { text: "å‘æ‘é•¿åæ˜ é—®é¢˜", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "ç»„ç»‡åŒå­¦è®¾è®¡åƒåœ¾åˆ†ç±»æ–¹æ¡ˆå¹¶å®æ–½", effects: { selfImprovement: 15, optimism: 10, gratitude: 15 } }
                    ]
                }
            ],
            soldier: [
                {
                    title: "å¾å…µå®£ä¼ ",
                    description: "å†›é˜Ÿæ¥å­¦æ ¡è¿›è¡Œå¾å…µå®£ä¼ ï¼Œå±•ç¤ºäº†å†›äººçš„è£èª‰ä¸è´£ä»»ã€‚",
                    options: [
                        { text: "è§‰å¾—å†›é˜Ÿç”Ÿæ´»å¤ªè‹¦ï¼Œä¸æ„Ÿå…´è¶£", effects: { selfImprovement: -10, optimism: -5, gratitude: -5 } },
                        { text: "äº†è§£ä¿¡æ¯ä½†ä¸ç¡®å®šæ˜¯å¦é€‚åˆ", effects: { selfImprovement: 5, optimism: 5, gratitude: 0 } },
                        { text: "ç§¯æå’¨è¯¢ï¼Œè¡¨è¾¾å‚å†›æ„æ„¿", effects: { selfImprovement: 10, optimism: 10, gratitude: 5 } }
                    ]
                },
                {
                    title: "ä½“èƒ½è®­ç»ƒ",
                    description: "ä¸ºäº†è¾¾åˆ°å‚å†›æ ‡å‡†ï¼Œäº¤å°è‹—éœ€è¦åŠ å¼ºä½“èƒ½è®­ç»ƒã€‚",
                    options: [
                        { text: "æ”¾å¼ƒè®­ç»ƒï¼Œè§‰å¾—è¦æ±‚å¤ªé«˜", effects: { selfImprovement: -15, optimism: -10, gratitude: 0 } },
                        { text: "å¶å°”è®­ç»ƒï¼Œä½†ä¸å¤ŸåšæŒ", effects: { selfImprovement: 5, optimism: 0, gratitude: 0 } },
                        { text: "åˆ¶å®šä¸¥æ ¼è®¡åˆ’ï¼Œæ¯å¤©åšæŒé”»ç‚¼", effects: { selfImprovement: 15, optimism: 10, gratitude: 5 } }
                    ]
                },
                {
                    title: "å®¶åº­è´£ä»»",
                    description: "äº¤å°è‹—çš„çˆ¶æ¯å¸Œæœ›ä»–ç•™åœ¨èº«è¾¹å¸®å¿™å®¶åŠ¡ï¼Œè€Œä¸æ˜¯å»å‚å†›ã€‚",
                    options: [
                        { text: "å®Œå…¨å¬ä»çˆ¶æ¯ï¼Œæ”¾å¼ƒå‚å†›", effects: { selfImprovement: -5, optimism: -5, gratitude: 5 } },
                        { text: "ä¸çˆ¶æ¯äº‰åµï¼ŒåšæŒè‡ªå·±çš„é€‰æ‹©", effects: { selfImprovement: 5, optimism: -5, gratitude: -10 } },
                        { text: "ä¸çˆ¶æ¯æ²Ÿé€šï¼Œæ‰¿è¯ºä¼šå¸¸å›å®¶çœ‹æœ›", effects: { selfImprovement: 10, optimism: 5, gratitude: 10 } }
                    ]
                }
            ]
        };

        // ç»“å±€æ•°æ®åº“
        const endings = {
            best: {
                scientist: {
                    title: "æ°å‡ºç§‘å­¦å®¶",
                    description: "é€šè¿‡ä¸æ‡ˆåŠªåŠ›ï¼Œä½ æˆä¸ºäº†è‘—åçš„ç¯å¢ƒç§‘å­¦å®¶ï¼Œä¸“é—¨ç ”ç©¶å†œæ‘å¯æŒç»­å‘å±•ã€‚ä½ å¸¦é¢†å›¢é˜Ÿå›åˆ°çŸ³æ¹–é•‡ï¼Œå¸®åŠ©å®¶ä¹¡å®ç°äº†ç”Ÿæ€ä¸ç»æµåŒèµ¢çš„å‘å±•æ¨¡å¼ï¼Œè¢«ä¹¡äº²ä»¬ç§°ä¸º'çŸ³æ¹–çš„éª„å‚²'ã€‚",
                    animation: "ğŸ”¬ğŸŒŸğŸŒ±"
                },
                athlete: {
                    title: "å† å†›è¿åŠ¨å‘˜",
                    description: "ä½ åœ¨å›½é™…èµ›åœºä¸Šå±¡è·æ®Šè£ï¼Œæˆä¸ºå®¶å–»æˆ·æ™“çš„ä½“è‚²æ˜æ˜Ÿã€‚ä½ ä»æœªå¿˜è®°å®¶ä¹¡ï¼Œç”¨æ¯”èµ›å¥–é‡‘ä¸ºçŸ³æ¹–é•‡ä¿®å»ºäº†ä½“è‚²ä¸­å¿ƒï¼ŒåŸ¹å…»æ–°ä¸€ä»£è¿åŠ¨å‘˜ï¼Œè®©æ›´å¤šå­©å­é€šè¿‡ä½“è‚²æ”¹å˜å‘½è¿ã€‚",
                    animation: "ğŸƒâ€â™‚ï¸ğŸ†â¤ï¸"
                },
                artist: {
                    title: "è‰ºæœ¯å¤§å¸ˆ",
                    description: "ä½ åˆ›æ–°æ€§åœ°å°†ä¼ ç»ŸæŠ€è‰ºä¸ç°ä»£è®¾è®¡ç»“åˆï¼Œä½œå“åœ¨å›½é™…ä¸Šå¹¿å—å¥½è¯„ã€‚ä½ åœ¨çŸ³æ¹–é•‡åˆ›åŠäº†è‰ºæœ¯å·¥åŠï¼Œå¸å¼•å¹´è½»äººå­¦ä¹ ä¼ ç»Ÿæ‰‹è‰ºï¼Œè®©çŸ³æ¹–æ–‡åŒ–èµ°å‘ä¸–ç•Œã€‚",
                    animation: "ğŸ¨ğŸŒ„âœ¨"
                },
                leader: {
                    title: "äººæ°‘å…¬ä»†",
                    description: "ä½ æˆåŠŸå½“é€‰ä¸ºçŸ³æ¹–é•‡é•¿ï¼Œä»¥åŠ¡å®åˆ›æ–°çš„æ”¿ç­–å¸¦é¢†å®¶ä¹¡è„±è´«è‡´å¯Œã€‚ä½ æ·±å…¥ç¾¤ä¼—ï¼Œäº†è§£éœ€æ±‚ï¼Œå°†çŸ³æ¹–é•‡æ‰“é€ æˆäº†å…¨å›½ä¹¡æ‘æŒ¯å…´çš„æ ·æ¿ï¼Œå®ç°äº†æœåŠ¡å®¶ä¹¡çš„æ¢¦æƒ³ã€‚",
                    animation: "ğŸ›ï¸ğŸ¤ğŸŒ…"
                },
                soldier: {
                    title: "è£èª‰å†›äºº",
                    description: "ä½ é€šè¿‡ä¸¥æ ¼è®­ç»ƒæˆä¸ºç‰¹ç§éƒ¨é˜Ÿæˆå‘˜ï¼Œå¤šæ¬¡å®Œæˆé‡è¦ä»»åŠ¡å¹¶è·å¾—è£èª‰å‹‹ç« ã€‚é€€ä¼åä½ å›åˆ°å®¶ä¹¡ï¼Œåˆ©ç”¨å†›é˜Ÿå­¦åˆ°çš„æŠ€èƒ½ç»„ç»‡æ°‘å…µè®­ç»ƒï¼Œä¿å«çŸ³æ¹–é•‡çš„å®‰å…¨ã€‚",
                    animation: "ğŸ–ï¸ğŸŒŸğŸ›¡ï¸"
                }
            },
            good: {
                scientist: {
                    title: "ç§‘ç ”å·¥ä½œè€…",
                    description: "ä½ æˆä¸ºä¸€åä¼˜ç§€çš„ç§‘ç ”å·¥ä½œè€…ï¼Œè™½ç„¶æ²¡èƒ½å–å¾—è½°åŠ¨æ€§çš„æˆå°±ï¼Œä½†åœ¨è‡ªå·±çš„é¢†åŸŸè¸å®å·¥ä½œï¼Œå¶å°”å›å®¶ä¹¡ä¸ºå­¦ç”Ÿä»¬ä¸¾åŠç§‘æ™®è®²åº§ï¼Œæ¿€å‘ä»–ä»¬å¯¹ç§‘å­¦çš„å…´è¶£ã€‚",
                    animation: "ğŸ”¬ğŸ“šğŸ‘"
                },
                athlete: {
                    title: "ä½“è‚²æ•™ç»ƒ",
                    description: "ä½ æˆä¸ºäº†ä¸€åä½“è‚²æ•™ç»ƒï¼ŒåŸ¹å…»äº†ä¸å°‘æœ‰æ½œåŠ›çš„å¹´è½»è¿åŠ¨å‘˜ã€‚è™½ç„¶æ²¡èƒ½ç«™ä¸Šæœ€é«˜é¢†å¥–å°ï¼Œä½†ä½ å¸®åŠ©è®¸å¤šå­©å­é€šè¿‡ä½“è‚²è·å¾—äº†ä¸Šå¤§å­¦çš„æœºä¼šï¼Œæ”¹å˜äº†ä»–ä»¬çš„å‘½è¿ã€‚",
                    animation: "ğŸƒâ€â™‚ï¸ğŸ‘¥ğŸ“£"
                },
                artist: {
                    title: "è‰ºæœ¯æ•™å¸ˆ",
                    description: "ä½ å›åˆ°å®¶ä¹¡æˆä¸ºè‰ºæœ¯æ•™å¸ˆï¼Œå°†åˆ›æ„å’Œç¾å­¦å¸¦ç»™çŸ³æ¹–é•‡çš„å­©å­ä»¬ã€‚ä½ çš„å­¦ç”Ÿå¤šæ¬¡åœ¨æ¯”èµ›ä¸­è·å¥–ï¼Œä½ ä¸ºçŸ³æ¹–é•‡çš„è‰ºæœ¯æ•™è‚²åšå‡ºäº†é‡è¦è´¡çŒ®ã€‚",
                    animation: "ğŸ¨ğŸ‘©â€ğŸ«ğŸŒˆ"
                },
                leader: {
                    title: "ç¤¾åŒºå¹²éƒ¨",
                    description: "ä½ æˆä¸ºçŸ³æ¹–é•‡çš„ç¤¾åŒºå¹²éƒ¨ï¼Œå…¢å…¢ä¸šä¸šä¸ºå±…æ°‘æœåŠ¡ã€‚ä½ è§£å†³äº†å¤šå¹´æ¥çš„åƒåœ¾å¤„ç†é—®é¢˜ï¼Œæ”¹å–„äº†ç¤¾åŒºç¯å¢ƒï¼Œèµ¢å¾—äº†å±…æ°‘çš„å°Šé‡å’Œä¿¡ä»»ã€‚",
                    animation: "ğŸ›ï¸ğŸ‘¥âœ…"
                },
                soldier: {
                    title: "ä¼˜ç§€å†›å®˜",
                    description: "ä½ åœ¨å†›é˜Ÿè¡¨ç°å‡ºè‰²ï¼Œæ™‹å‡ä¸ºå†›å®˜ï¼Œå¸¦é¢†å£«å…µå®Œæˆå¤šé¡¹ä»»åŠ¡ã€‚æœå½¹æœŸé—´ä½ å§‹ç»ˆå…³å¿ƒå®¶ä¹¡å‘å±•ï¼Œä¸ºçŸ³æ¹–é•‡äº‰å–åˆ°äº†å†›é˜Ÿçš„æ”¯æ´é¡¹ç›®ã€‚",
                    animation: "ğŸ–ï¸â­ğŸ¤"
                }
            },
            average: {
                scientist: {
                    title: "å®éªŒå®¤æŠ€æœ¯å‘˜",
                    description: "ä½ åœ¨ä¸€å®¶å…¬å¸çš„å®éªŒå®¤å·¥ä½œï¼Œç”Ÿæ´»ç¨³å®šä½†å¹³æ·¡ã€‚å¶å°”ä½ ä¼šæƒ³èµ·å¹´å°‘æ—¶çš„ç§‘å­¦å®¶æ¢¦æƒ³ï¼Œä½†æ—¥å¸¸çäº‹è®©ä½ å¾ˆå°‘æœ‰æ—¶é—´æ·±å…¥é’»ç ”ç§‘å­¦é—®é¢˜ã€‚",
                    animation: "ğŸ”¬ğŸ”â³"
                },
                athlete: {
                    title: "å¥èº«æ•™ç»ƒ",
                    description: "ä½ åœ¨åŸå¸‚å¥èº«ä¸­å¿ƒå·¥ä½œï¼Œå¸®åŠ©å®¢æˆ·ä¿æŒå¥åº·ã€‚è™½ç„¶è¿™ä¸æ˜¯ä½ æœ€åˆæ¢¦æƒ³çš„è¿åŠ¨å‘˜ç”Ÿæ¶¯ï¼Œä½†ä½ è¿˜æ˜¯ä»å¸®åŠ©ä»–äººä¸­è·å¾—æ»¡è¶³æ„Ÿã€‚",
                    animation: "ğŸƒâ€â™‚ï¸ğŸ’ªğŸ˜Š"
                },
                artist: {
                    title: "è®¾è®¡åŠ©ç†",
                    description: "ä½ åœ¨è®¾è®¡å…¬å¸å·¥ä½œï¼Œä¸»è¦è´Ÿè´£æ‰§è¡Œä»–äººçš„åˆ›æ„ã€‚æœ‰æ—¶ä½ ä¼šæƒ³èµ·åˆ˜è€å¸ˆæ•™çš„ä¼ ç»ŸæŠ€è‰ºï¼Œä½†å¾ˆå°‘æœ‰æœºä¼šåœ¨å®è·µä¸­è¿ç”¨ã€‚",
                    animation: "ğŸ¨âœï¸ğŸ‘€"
                },
                leader: {
                    title: "åŠå…¬å®¤æ–‡å‘˜",
                    description: "ä½ åœ¨é•‡æ”¿åºœå·¥ä½œï¼Œå¤„ç†æ—¥å¸¸æ–‡ä¹¦äº‹åŠ¡ã€‚ä½ æœ‰æ—¶ä¼šæƒ³åˆ°å½“å¹´æƒ³è¦æ”¹å˜å®¶ä¹¡çš„é›„å¿ƒï¼Œä½†ç°åœ¨æ›´å¤šçš„æ˜¯å®Œæˆåˆ†é…çš„ä»»åŠ¡ã€‚",
                    animation: "ğŸ›ï¸ğŸ“„âŒ¨ï¸"
                },
                soldier: {
                    title: "é€€ä¼å£«å…µ",
                    description: "ä½ å®Œæˆäº†åŸºæœ¬å…µå½¹åé€€ä¼ï¼Œç°åœ¨ä»äº‹å®‰ä¿å·¥ä½œã€‚ä½ ä¿æŒç€å†›äººçš„çºªå¾‹æ€§ï¼Œä½†å¾ˆå°‘æœ‰æœºä¼šè¿ç”¨åœ¨å†›é˜Ÿå­¦åˆ°çš„æŠ€èƒ½ã€‚",
                    animation: "ğŸ–ï¸ğŸ“¦â±ï¸"
                }
            },
            bad: {
                scientist: {
                    title: "æ”¾å¼ƒç§‘ç ”",
                    description: "é¢å¯¹ç§‘ç ”è·¯ä¸Šçš„å›°éš¾ï¼Œä½ é€æ¸å¤±å»äº†ä¿¡å¿ƒï¼Œæœ€ç»ˆæ”¾å¼ƒäº†ç§‘å­¦å®¶çš„æ¢¦æƒ³ã€‚ä½ æ‰¾äº†ä¸€ä»½ä¸ç§‘å­¦æ— å…³çš„å·¥ä½œï¼Œå¶å°”ä¼šå¥½å¥‡å¦‚æœå½“å¹´åšæŒä¸‹æ¥ä¼šæ€æ ·ã€‚",
                    animation: "ğŸ”¬âŒğŸ˜”"
                },
                athlete: {
                    title: "ç¦»å¼€èµ›åœº",
                    description: "å—ä¼¤åä½ æ²¡èƒ½æ¢å¤çŠ¶æ€ï¼Œæœ€ç»ˆé€€å‡ºäº†è¿åŠ¨å‘˜ç”Ÿæ¶¯ã€‚ä½ æ²¡æœ‰ç»§ç»­å­¦ä¸šï¼Œç°åœ¨åšç€ä½“åŠ›å·¥ä½œï¼Œå¸¸å¸¸æ„Ÿå¹å½“å¹´æ²¡æœ‰åšå¥½ä¸¤æ‰‹å‡†å¤‡ã€‚",
                    animation: "ğŸƒâ€â™‚ï¸ğŸ›‘ğŸ’”"
                },
                artist: {
                    title: "æ”¾å¼ƒè‰ºæœ¯",
                    description: "ä½ è§‰å¾—è‰ºæœ¯éš¾ä»¥è°‹ç”Ÿï¼Œæ—©æ—©æ”¾å¼ƒäº†åˆ›ä½œã€‚ç°åœ¨ä½ å¾ˆå°‘æ¥è§¦è‰ºæœ¯ï¼Œå¶å°”çœ‹åˆ°åˆ«äººçš„ä½œå“æ—¶ä¼šæ„Ÿåˆ°ä¸€ä¸é—æ†¾ã€‚",
                    animation: "ğŸ¨ğŸš«ğŸ˜"
                },
                leader: {
                    title: "ç¦»å¼€å®¶ä¹¡",
                    description: "ä½ è§‰å¾—å®¶ä¹¡å‘å±•æœºä¼šæœ‰é™ï¼Œé€‰æ‹©å»å¤§åŸå¸‚æ‰“å·¥ã€‚è™½ç„¶æ”¶å…¥å°šå¯ï¼Œä½†è¿œç¦»äº²äººï¼Œä¹Ÿå¾ˆå°‘å‚ä¸å®¶ä¹¡çš„å»ºè®¾ã€‚",
                    animation: "ğŸ›ï¸ğŸ‘‹ğŸŒ†"
                },
                soldier: {
                    title: "æœªèƒ½å…¥ä¼",
                    description: "ä½ å› ä½“èƒ½æˆ–å…¶å®ƒåŸå› æœªèƒ½é€šè¿‡å…¥ä¼è€ƒæ ¸ï¼Œä¹Ÿæ²¡æœ‰åšå¥½å…¶ä»–èŒä¸šè§„åˆ’ã€‚ç°åœ¨ä½ æœ‰äº›è¿·èŒ«ï¼Œä¸çŸ¥é“æœªæ¥çš„æ–¹å‘ã€‚",
                    animation: "ğŸ–ï¸ğŸš«ğŸ˜"
                }
            }
        };

        // æ˜¾ç¤ºæŒ‡å®šåœºæ™¯
        function showScene(sceneId) {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            document.getElementById(sceneId).classList.add('active');
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo(0, 0);
        }

        // é€‰æ‹©æ¢¦æƒ³
        function selectDream(dream) {
            gameState.dream = dream;
            
            // ç»„åˆäº‹ä»¶ï¼š3ä¸ªé€šç”¨äº‹ä»¶ + 2ä¸ªæ¢¦æƒ³ç‰¹å®šäº‹ä»¶
            // å†›äººæœ‰3ä¸ªç‰¹å®šäº‹ä»¶ï¼Œæ‰€ä»¥åªå–2ä¸ªé€šç”¨äº‹ä»¶
            const commonEvents = dream === 'soldier' ? 
                eventDatabase.common.slice(0, 2) : 
                eventDatabase.common;
                
            gameState.events = [
                ...commonEvents,
                ...eventDatabase[dream]
            ];
            
            // æ›´æ–°è¿›åº¦æ¡
            document.getElementById('progress-dream').style.width = '100%';
            
            // æ˜¾ç¤ºç¬¬ä¸€ä¸ªäº‹ä»¶
            showEvent(0);
        }

        // æ˜¾ç¤ºäº‹ä»¶
        function showEvent(eventIndex) {
            gameState.currentEvent = eventIndex;
            const event = gameState.events[eventIndex];
            
            // åˆ›å»ºäº‹ä»¶åœºæ™¯HTML
            const eventHTML = `
                <div class="scene" id="scene-event-${eventIndex}">
                    <h2>ç¬¬${eventIndex + 1}æ­¥ï¼š${event.title}</h2>
                    <p>${event.description}</p>
                    <div class="stats">
                        <div class="stat" id="self-improvement">è‡ªå¼º: <span>${gameState.selfImprovement}</span></div>
                        <div class="stat" id="optimism">ä¹è§‚: <span>${gameState.optimism}</span></div>
                        <div class="stat" id="gratitude">æ„Ÿæ©: <span>${gameState.gratitude}</span></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-self" style="width: ${gameState.selfImprovement}%;"></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-opt" style="width: ${gameState.optimism}%;"></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-grat" style="width: ${gameState.gratitude}%;"></div>
                    </div>
                    <div class="choices">
                        ${event.options.map((option, i) => 
                            `<button onclick="chooseOption(${i})">${option.text}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            // æ·»åŠ åˆ°äº‹ä»¶å®¹å™¨
            document.getElementById('scene-events').innerHTML = eventHTML;
            
            // æ˜¾ç¤ºäº‹ä»¶åœºæ™¯
            showScene(`scene-event-${eventIndex}`);
        }

        // é€‰æ‹©é€‰é¡¹
        function chooseOption(optionIndex) {
            const event = gameState.events[gameState.currentEvent];
            const option = event.options[optionIndex];
            
            // æ›´æ–°çŠ¶æ€
            gameState.selfImprovement += option.effects.selfImprovement || 0;
            gameState.optimism += option.effects.optimism || 0;
            gameState.gratitude += option.effects.gratitude || 0;
            
            // ç¡®ä¿æ•°å€¼åœ¨0-100èŒƒå›´å†…
            gameState.selfImprovement = Math.max(0, Math.min(100, gameState.selfImprovement));
            gameState.optimism = Math.max(0, Math.min(100, gameState.optimism));
            gameState.gratitude = Math.max(0, Math.min(100, gameState.gratitude));
            
            // åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ›´å¤šäº‹ä»¶
            if (gameState.currentEvent < gameState.events.length - 1) {
                // æ˜¾ç¤ºä¸‹ä¸€ä¸ªäº‹ä»¶
                showEvent(gameState.currentEvent + 1);
            } else {
                // æ˜¾ç¤ºç»“å±€
                showEnding();
            }
        }

        // æ˜¾ç¤ºç»“å±€
        function showEnding() {
            const totalScore = gameState.selfImprovement + gameState.optimism + gameState.gratitude;
            let endingType;
            
            // æ ¹æ®æ€»åˆ†ç¡®å®šç»“å±€ç±»å‹
            if (totalScore >= 240) {
                endingType = "best";
            } else if (totalScore >= 200) {
                endingType = "good";
            } else if (totalScore >= 150) {
                endingType = "average";
            } else {
                endingType = "bad";
            }
            
            // è·å–å…·ä½“ç»“å±€
            const ending = endings[endingType][gameState.dream];
            
            // æ›´æ–°ç»“å±€æ–‡æœ¬
            document.getElementById('ending-text').innerHTML = `
                <h3>${ending.title}</h3>
                <p>${ending.description}</p>
            `;
            
            // æ›´æ–°æœ€ç»ˆå±æ€§å€¼
            document.getElementById('final-si').textContent = gameState.selfImprovement;
            document.getElementById('final-op').textContent = gameState.optimism;
            document.getElementById('final-gr').textContent = gameState.gratitude;
            
            // åˆ›å»ºç»“å±€åŠ¨ç”»
            const animationContainer = document.getElementById('ending-animation');
            animationContainer.innerHTML = '';
            
            ending.animation.split('').forEach((emoji, index) => {
                const emojiElement = document.createElement('div');
                emojiElement.className = 'character';
                emojiElement.textContent = emoji;
                emojiElement.style.animation = `celebrate 2s infinite ${index * 0.3}s`;
                animationContainer.appendChild(emojiElement);
            });
            
            // æ˜¾ç¤ºç»“å±€åœºæ™¯
            showScene('scene-ending');
        }
    </script>
</body>
</html>