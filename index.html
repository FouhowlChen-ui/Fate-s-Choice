<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>命运选择游戏：交小苗的成长之旅</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        .scene {
            padding: 30px;
            display: none;
        }
        .active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.2rem;
        }
        h2 {
            color: #3498db;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
        }
        p {
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        .dream-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        .dream-option {
            flex: 1;
            min-width: 150px;
            padding: 20px;
            border: 2px solid #3498db;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .dream-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: #e8f4fc;
        }
        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }
        button {
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: #3498db;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            font-weight: bold;
        }
        .stat {
            padding: 10px 15px;
            border-radius: 10px;
            background: #ecf0f1;
            min-width: 100px;
            text-align: center;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        #self-improvement { color: #e74c3c; }
        #optimism { color: #f39c12; }
        #gratitude { color: #27ae60; }
        .ending {
            font-size: 1.2rem;
            line-height: 1.8;
            padding: 20px;
            text-align: center;
        }
        .animation-container {
            width: 100%;
            height: 200px;
            margin: 20px 0;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .character {
            font-size: 4rem;
            position: absolute;
            transition: all 1s ease;
        }
        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        #progress-self { background: #e74c3c; width: 50%; }
        #progress-opt { background: #f39c12; width: 50%; }
        #progress-grat { background: #27ae60; width: 50%; }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes celebrate {
            0% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-30px) rotate(10deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(-30px) rotate(-10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        /* 响应式设计 */
        @media (max-width: 600px) {
            .dream-options {
                flex-direction: column;
            }
            .scene {
                padding: 20px;
            }
            h1 {
                font-size: 1.8rem;
            }
            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 开场 -->
        <div id="scene-start" class="scene active">
            <h1>命运选择游戏：交小苗的成长之旅</h1>
            <p>在这个互动游戏中，你将扮演"交小苗"，体验在石湖镇的成长历程。你的每个选择都会影响三种核心品质：<strong>自强</strong>、<strong>乐观</strong>和<strong>感恩</strong>。</p>
            <p>这些品质将决定你能否实现梦想，成为你想成为的人！</p>
            <div class="animation-container">
                <div class="character" style="animation: bounce 2s infinite;">🌱</div>
            </div>
            <button onclick="showScene('scene-dream')">开始游戏</button>
        </div>

        <!-- 选择梦想 -->
        <div id="scene-dream" class="scene">
            <h2>第一步：选择你的梦想</h2>
            <p>交小苗，你长大后想成为什么样的人？选择一个你最向往的职业道路：</p>
            <div class="dream-options">
                <div class="dream-option" onclick="selectDream('scientist')">
                    <h3>🔬 科学家</h3>
                    <p>探索自然奥秘，用科技改变世界</p>
                </div>
                <div class="dream-option" onclick="selectDream('athlete')">
                    <h3>🏃 运动员</h3>
                    <p>挑战身体极限，为家乡争光</p>
                </div>
                <div class="dream-option" onclick="selectDream('artist')">
                    <h3>🎨 艺术家</h3>
                    <p>用创意表达情感，传承石湖文化</p>
                </div>
                <div class="dream-option" onclick="selectDream('leader')">
                    <h3>🏛️ 镇长</h3>
                    <p>服务家乡人民，建设美好石湖</p>
                </div>
                <div class="dream-option" onclick="selectDream('soldier')">
                    <h3>🎖️ 军人</h3>
                    <p>保家卫国，守护人民安全</p>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress-dream" style="width: 0%; background: #3498db;"></div>
            </div>
        </div>

        <!-- 五个事件场景将在这里动态加载 -->
        <div id="scene-events"></div>

        <!-- 结局 -->
        <div id="scene-ending" class="scene">
            <h2>交小苗的成长结局</h2>
            <div class="animation-container" id="ending-animation">
                <!-- 动画将由JavaScript动态生成 -->
            </div>
            <div class="ending" id="ending-text">
                <!-- 结局文本将由JavaScript动态生成 -->
            </div>
            <div class="stats">
                <div class="stat">自强: <span id="final-si">0</span></div>
                <div class="stat">乐观: <span id="final-op">0</span></div>
                <div class="stat">感恩: <span id="final-gr">0</span></div>
            </div>
            <button onclick="location.reload()">再玩一次</button>
        </div>
    </div>

    <script>
        // 游戏状态
        let gameState = {
            dream: null,
            selfImprovement: 50,
            optimism: 50,
            gratitude: 50,
            currentEvent: 0,
            events: []
        };

        // 事件数据库 - 根据不同梦想定制
        const eventDatabase = {
            common: [
                {
                    title: "新学期开始",
                    description: "新学期开始了，交小苗需要选择如何分配自己的课余时间。",
                    options: [
                        { text: "参加学校的兴趣小组，学习新技能", effects: { selfImprovement: 10, optimism: 5, gratitude: 0 } },
                        { text: "帮助家里干农活，减轻父母负担", effects: { selfImprovement: 5, optimism: 0, gratitude: 15 } },
                        { text: "和朋友一起玩耍，享受童年时光", effects: { selfImprovement: 0, optimism: 15, gratitude: 5 } }
                    ]
                },
                {
                    title: "重要的考试",
                    description: "期中考试成绩不理想，交小苗感到有些沮丧。",
                    options: [
                        { text: "放弃努力，认为自己不是学习的料", effects: { selfImprovement: -15, optimism: -10, gratitude: 0 } },
                        { text: "请教老师和同学，找出自己的不足", effects: { selfImprovement: 15, optimism: 5, gratitude: 5 } },
                        { text: "制定学习计划，每天坚持复习", effects: { selfImprovement: 20, optimism: 0, gratitude: 0 } }
                    ]
                },
                {
                    title: "社区活动",
                    description: "村里组织志愿服务活动，帮助 elderly 居民收获农产品。",
                    options: [
                        { text: "借口学习忙，不参加活动", effects: { selfImprovement: 0, optimism: -5, gratitude: -10 } },
                        { text: "参加活动，但只做分配的任务", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "主动组织同学一起参加，帮助更多居民", effects: { selfImprovement: 10, optimism: 10, gratitude: 15 } }
                    ]
                }
            ],
            scientist: [
                {
                    title: "科学竞赛",
                    description: "学校要选拔学生参加区里的科学竞赛，交小苗很感兴趣。",
                    options: [
                        { text: "觉得自己能力不够，不报名", effects: { selfImprovement: -10, optimism: -10, gratitude: 0 } },
                        { text: "报名参加，尽力准备", effects: { selfImprovement: 15, optimism: 5, gratitude: 0 } },
                        { text: "组织小队一起参赛，互相学习", effects: { selfImprovement: 10, optimism: 10, gratitude: 10 } }
                    ]
                },
                {
                    title: "科技展览",
                    description: "市里举办科技展览，但需要自己支付交通和门票费用。",
                    options: [
                        { text: "不去参观，省钱买学习资料", effects: { selfImprovement: 5, optimism: -5, gratitude: 0 } },
                        { text: "请求父母支持去参观", effects: { selfImprovement: 10, optimism: 5, gratitude: -5 } },
                        { text: "通过收集废品自己攒钱去参观", effects: { selfImprovement: 15, optimism: 10, gratitude: 5 } }
                    ]
                }
            ],
            athlete: [
                {
                    title: "体育选拔",
                    description: "省体校教练来学校选拔体育苗子，看中了交小苗的潜力。",
                    options: [
                        { text: "担心影响学习，拒绝参加选拔", effects: { selfImprovement: -5, optimism: -5, gratitude: 0 } },
                        { text: "参加选拔，但不愿去外地训练", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "抓住机会，承诺会平衡好训练和学习", effects: { selfImprovement: 15, optimism: 10, gratitude: 5 } }
                    ]
                },
                {
                    title: "比赛受伤",
                    description: "在重要比赛前，交小苗训练时受伤，医生建议休息一个月。",
                    options: [
                        { text: "灰心丧气，放弃比赛", effects: { selfImprovement: -15, optimism: -15, gratitude: 0 } },
                        { text: "坚持轻量训练，尽快恢复", effects: { selfImprovement: 10, optimism: 10, gratitude: 0 } },
                        { text: "帮助队友训练，学习战术知识", effects: { selfImprovement: 5, optimism: 15, gratitude: 10 } }
                    ]
                }
            ],
            artist: [
                {
                    title: "文化传承",
                    description: "非遗传承人刘老师来学校招募学徒，学习核桃拼贴技艺。",
                    options: [
                        { text: "觉得传统技艺过时，不感兴趣", effects: { selfImprovement: -5, optimism: -5, gratitude: -10 } },
                        { text: "尝试学习，但不投入太多时间", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "认真学习，希望传承家乡文化", effects: { selfImprovement: 10, optimism: 10, gratitude: 15 } }
                    ]
                },
                {
                    title: "创作瓶颈",
                    description: "交小苗为参加艺术比赛创作作品，但遇到了创意瓶颈。",
                    options: [
                        { text: "放弃比赛，觉得自己没有天赋", effects: { selfImprovement: -15, optimism: -15, gratitude: 0 } },
                        { text: "模仿他人作品交差", effects: { selfImprovement: -5, optimism: -5, gratitude: -5 } },
                        { text: "从石湖镇的自然风光中寻找灵感", effects: { selfImprovement: 10, optimism: 15, gratitude: 10 } }
                    ]
                }
            ],
            leader: [
                {
                    title: "学生代表",
                    description: "交小苗被选为学生代表，可以向学校提出改善建议。",
                    options: [
                        { text: "不发表意见，避免麻烦", effects: { selfImprovement: -5, optimism: -5, gratitude: -5 } },
                        { text: "提出改善自己班级的建议", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "调研全校学生的需求，提出综合方案", effects: { selfImprovement: 15, optimism: 10, gratitude: 10 } }
                    ]
                },
                {
                    title: "社区问题",
                    description: "村里垃圾处理不当的问题日益严重，影响居民生活。",
                    options: [
                        { text: "不关心，认为这是大人的事", effects: { selfImprovement: -5, optimism: -5, gratitude: -10 } },
                        { text: "向村长反映问题", effects: { selfImprovement: 5, optimism: 5, gratitude: 5 } },
                        { text: "组织同学设计垃圾分类方案并实施", effects: { selfImprovement: 15, optimism: 10, gratitude: 15 } }
                    ]
                }
            ],
            soldier: [
                {
                    title: "征兵宣传",
                    description: "军队来学校进行征兵宣传，展示了军人的荣誉与责任。",
                    options: [
                        { text: "觉得军队生活太苦，不感兴趣", effects: { selfImprovement: -10, optimism: -5, gratitude: -5 } },
                        { text: "了解信息但不确定是否适合", effects: { selfImprovement: 5, optimism: 5, gratitude: 0 } },
                        { text: "积极咨询，表达参军意愿", effects: { selfImprovement: 10, optimism: 10, gratitude: 5 } }
                    ]
                },
                {
                    title: "体能训练",
                    description: "为了达到参军标准，交小苗需要加强体能训练。",
                    options: [
                        { text: "放弃训练，觉得要求太高", effects: { selfImprovement: -15, optimism: -10, gratitude: 0 } },
                        { text: "偶尔训练，但不够坚持", effects: { selfImprovement: 5, optimism: 0, gratitude: 0 } },
                        { text: "制定严格计划，每天坚持锻炼", effects: { selfImprovement: 15, optimism: 10, gratitude: 5 } }
                    ]
                },
                {
                    title: "家庭责任",
                    description: "交小苗的父母希望他留在身边帮忙家务，而不是去参军。",
                    options: [
                        { text: "完全听从父母，放弃参军", effects: { selfImprovement: -5, optimism: -5, gratitude: 5 } },
                        { text: "与父母争吵，坚持自己的选择", effects: { selfImprovement: 5, optimism: -5, gratitude: -10 } },
                        { text: "与父母沟通，承诺会常回家看望", effects: { selfImprovement: 10, optimism: 5, gratitude: 10 } }
                    ]
                }
            ]
        };

        // 结局数据库
        const endings = {
            best: {
                scientist: {
                    title: "杰出科学家",
                    description: "通过不懈努力，你成为了著名的环境科学家，专门研究农村可持续发展。你带领团队回到石湖镇，帮助家乡实现了生态与经济双赢的发展模式，被乡亲们称为'石湖的骄傲'。",
                    animation: "🔬🌟🌱"
                },
                athlete: {
                    title: "冠军运动员",
                    description: "你在国际赛场上屡获殊荣，成为家喻户晓的体育明星。你从未忘记家乡，用比赛奖金为石湖镇修建了体育中心，培养新一代运动员，让更多孩子通过体育改变命运。",
                    animation: "🏃‍♂️🏆❤️"
                },
                artist: {
                    title: "艺术大师",
                    description: "你创新性地将传统技艺与现代设计结合，作品在国际上广受好评。你在石湖镇创办了艺术工坊，吸引年轻人学习传统手艺，让石湖文化走向世界。",
                    animation: "🎨🌄✨"
                },
                leader: {
                    title: "人民公仆",
                    description: "你成功当选为石湖镇长，以务实创新的政策带领家乡脱贫致富。你深入群众，了解需求，将石湖镇打造成了全国乡村振兴的样板，实现了服务家乡的梦想。",
                    animation: "🏛️🤝🌅"
                },
                soldier: {
                    title: "荣誉军人",
                    description: "你通过严格训练成为特种部队成员，多次完成重要任务并获得荣誉勋章。退伍后你回到家乡，利用军队学到的技能组织民兵训练，保卫石湖镇的安全。",
                    animation: "🎖️🌟🛡️"
                }
            },
            good: {
                scientist: {
                    title: "科研工作者",
                    description: "你成为一名优秀的科研工作者，虽然没能取得轰动性的成就，但在自己的领域踏实工作，偶尔回家乡为学生们举办科普讲座，激发他们对科学的兴趣。",
                    animation: "🔬📚👍"
                },
                athlete: {
                    title: "体育教练",
                    description: "你成为了一名体育教练，培养了不少有潜力的年轻运动员。虽然没能站上最高领奖台，但你帮助许多孩子通过体育获得了上大学的机会，改变了他们的命运。",
                    animation: "🏃‍♂️👥📣"
                },
                artist: {
                    title: "艺术教师",
                    description: "你回到家乡成为艺术教师，将创意和美学带给石湖镇的孩子们。你的学生多次在比赛中获奖，你为石湖镇的艺术教育做出了重要贡献。",
                    animation: "🎨👩‍🏫🌈"
                },
                leader: {
                    title: "社区干部",
                    description: "你成为石湖镇的社区干部，兢兢业业为居民服务。你解决了多年来的垃圾处理问题，改善了社区环境，赢得了居民的尊重和信任。",
                    animation: "🏛️👥✅"
                },
                soldier: {
                    title: "优秀军官",
                    description: "你在军队表现出色，晋升为军官，带领士兵完成多项任务。服役期间你始终关心家乡发展，为石湖镇争取到了军队的支援项目。",
                    animation: "🎖️⭐🤝"
                }
            },
            average: {
                scientist: {
                    title: "实验室技术员",
                    description: "你在一家公司的实验室工作，生活稳定但平淡。偶尔你会想起年少时的科学家梦想，但日常琐事让你很少有时间深入钻研科学问题。",
                    animation: "🔬🔍⏳"
                },
                athlete: {
                    title: "健身教练",
                    description: "你在城市健身中心工作，帮助客户保持健康。虽然这不是你最初梦想的运动员生涯，但你还是从帮助他人中获得满足感。",
                    animation: "🏃‍♂️💪😊"
                },
                artist: {
                    title: "设计助理",
                    description: "你在设计公司工作，主要负责执行他人的创意。有时你会想起刘老师教的传统技艺，但很少有机会在实践中运用。",
                    animation: "🎨✏️👀"
                },
                leader: {
                    title: "办公室文员",
                    description: "你在镇政府工作，处理日常文书事务。你有时会想到当年想要改变家乡的雄心，但现在更多的是完成分配的任务。",
                    animation: "🏛️📄⌨️"
                },
                soldier: {
                    title: "退伍士兵",
                    description: "你完成了基本兵役后退伍，现在从事安保工作。你保持着军人的纪律性，但很少有机会运用在军队学到的技能。",
                    animation: "🎖️📦⏱️"
                }
            },
            bad: {
                scientist: {
                    title: "放弃科研",
                    description: "面对科研路上的困难，你逐渐失去了信心，最终放弃了科学家的梦想。你找了一份与科学无关的工作，偶尔会好奇如果当年坚持下来会怎样。",
                    animation: "🔬❌😔"
                },
                athlete: {
                    title: "离开赛场",
                    description: "受伤后你没能恢复状态，最终退出了运动员生涯。你没有继续学业，现在做着体力工作，常常感叹当年没有做好两手准备。",
                    animation: "🏃‍♂️🛑💔"
                },
                artist: {
                    title: "放弃艺术",
                    description: "你觉得艺术难以谋生，早早放弃了创作。现在你很少接触艺术，偶尔看到别人的作品时会感到一丝遗憾。",
                    animation: "🎨🚫😞"
                },
                leader: {
                    title: "离开家乡",
                    description: "你觉得家乡发展机会有限，选择去大城市打工。虽然收入尚可，但远离亲人，也很少参与家乡的建设。",
                    animation: "🏛️👋🌆"
                },
                soldier: {
                    title: "未能入伍",
                    description: "你因体能或其它原因未能通过入伍考核，也没有做好其他职业规划。现在你有些迷茫，不知道未来的方向。",
                    animation: "🎖️🚫😞"
                }
            }
        };

        // 显示指定场景
        function showScene(sceneId) {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            document.getElementById(sceneId).classList.add('active');
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }

        // 选择梦想
        function selectDream(dream) {
            gameState.dream = dream;
            
            // 组合事件：3个通用事件 + 2个梦想特定事件
            // 军人有3个特定事件，所以只取2个通用事件
            const commonEvents = dream === 'soldier' ? 
                eventDatabase.common.slice(0, 2) : 
                eventDatabase.common;
                
            gameState.events = [
                ...commonEvents,
                ...eventDatabase[dream]
            ];
            
            // 更新进度条
            document.getElementById('progress-dream').style.width = '100%';
            
            // 显示第一个事件
            showEvent(0);
        }

        // 显示事件
        function showEvent(eventIndex) {
            gameState.currentEvent = eventIndex;
            const event = gameState.events[eventIndex];
            
            // 创建事件场景HTML
            const eventHTML = `
                <div class="scene" id="scene-event-${eventIndex}">
                    <h2>第${eventIndex + 1}步：${event.title}</h2>
                    <p>${event.description}</p>
                    <div class="stats">
                        <div class="stat" id="self-improvement">自强: <span>${gameState.selfImprovement}</span></div>
                        <div class="stat" id="optimism">乐观: <span>${gameState.optimism}</span></div>
                        <div class="stat" id="gratitude">感恩: <span>${gameState.gratitude}</span></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-self" style="width: ${gameState.selfImprovement}%;"></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-opt" style="width: ${gameState.optimism}%;"></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-grat" style="width: ${gameState.gratitude}%;"></div>
                    </div>
                    <div class="choices">
                        ${event.options.map((option, i) => 
                            `<button onclick="chooseOption(${i})">${option.text}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            // 添加到事件容器
            document.getElementById('scene-events').innerHTML = eventHTML;
            
            // 显示事件场景
            showScene(`scene-event-${eventIndex}`);
        }

        // 选择选项
        function chooseOption(optionIndex) {
            const event = gameState.events[gameState.currentEvent];
            const option = event.options[optionIndex];
            
            // 更新状态
            gameState.selfImprovement += option.effects.selfImprovement || 0;
            gameState.optimism += option.effects.optimism || 0;
            gameState.gratitude += option.effects.gratitude || 0;
            
            // 确保数值在0-100范围内
            gameState.selfImprovement = Math.max(0, Math.min(100, gameState.selfImprovement));
            gameState.optimism = Math.max(0, Math.min(100, gameState.optimism));
            gameState.gratitude = Math.max(0, Math.min(100, gameState.gratitude));
            
            // 判断是否还有更多事件
            if (gameState.currentEvent < gameState.events.length - 1) {
                // 显示下一个事件
                showEvent(gameState.currentEvent + 1);
            } else {
                // 显示结局
                showEnding();
            }
        }

        // 显示结局
        function showEnding() {
            const totalScore = gameState.selfImprovement + gameState.optimism + gameState.gratitude;
            let endingType;
            
            // 根据总分确定结局类型
            if (totalScore >= 240) {
                endingType = "best";
            } else if (totalScore >= 200) {
                endingType = "good";
            } else if (totalScore >= 150) {
                endingType = "average";
            } else {
                endingType = "bad";
            }
            
            // 获取具体结局
            const ending = endings[endingType][gameState.dream];
            
            // 更新结局文本
            document.getElementById('ending-text').innerHTML = `
                <h3>${ending.title}</h3>
                <p>${ending.description}</p>
            `;
            
            // 更新最终属性值
            document.getElementById('final-si').textContent = gameState.selfImprovement;
            document.getElementById('final-op').textContent = gameState.optimism;
            document.getElementById('final-gr').textContent = gameState.gratitude;
            
            // 创建结局动画
            const animationContainer = document.getElementById('ending-animation');
            animationContainer.innerHTML = '';
            
            ending.animation.split('').forEach((emoji, index) => {
                const emojiElement = document.createElement('div');
                emojiElement.className = 'character';
                emojiElement.textContent = emoji;
                emojiElement.style.animation = `celebrate 2s infinite ${index * 0.3}s`;
                animationContainer.appendChild(emojiElement);
            });
            
            // 显示结局场景
            showScene('scene-ending');
        }
    </script>
</body>
</html>